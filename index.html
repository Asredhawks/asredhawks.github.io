<!Doctype html>
<html>
<head>
<title>St. Athanasius Tour</title>
  <!-- <script src="./vrview.min.js"></script> -->
  <script src="https://storage.googleapis.com/vrview/2.0/build/vrview.min.js"></script>
  <script>
  //yote
var sceneData;
    window.addEventListener('load', onVrViewLoad);
    function onVrViewLoad() {
	function XHR(file, callback){
    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function(){
        if(xhr.readyState === 4 && xhr.status === 200){
            callback(xhr.responseText);
            //console.log(JSON.parse(xhr.responseText));
        }
    }
    xhr.open('GET', file, true);
    xhr.send();
}
XHR('data.json', function(response) {
    sceneData = JSON.parse(response);
});
  function changeView(location) {
    vrView.setContent({
      image: sceneData[location].image,
      is_stereo: false,
      is_autopan_off: true,
      default_yaw: sceneData[location].dYaw
    });
    console.log(sceneData[location]);

    for(i in sceneData[location].hotspots){
    var name = i;
      console.log(name);
    vrView.addHotspot(name, {
    pitch: sceneData[location].hotspots[name].p, // In degrees. Up is positive.
    yaw: sceneData[location].hotspots[name].y, // In degrees. To the right is positive.
    radius: 0.75, // Radius of the circular target in meters.
    distance: 10 // Distance of target from camera in meters.
  });
      console.log(sceneData[location].hotspots[i]);
    }}

    // Selector '#vrview' finds element with id 'vrview'.
    var width = window.innerWidth;
    var height = window.innerHeight;
    var vrView = new VRView.Player('#vrview', {
      image: '//mswider.github.io/R0010075.JPG',
      is_stereo: false,
      width: width,
      height: height,
      default_yaw: 180,  //Default yaw rotation in degrees
      is_autopan_off: true //Disables autopan
    });
    vrView.on('ready',function(){
  vrView.addHotspot('lobby3', {
    pitch: 0, // In degrees. Up is positive.
    yaw: -176, // In degrees. To the right is positive.
    radius: 0.75, // Radius of the circular target in meters.
    distance: 10 // Distance of target from camera in meters.
  });
  vrView.on('click', function(event) {
  switch(event.id){
		case 'lobby':
			changeView("f1Intersection");
			break;
		case 'gymIntersection':
			changeView("gymIntersection");
			break;
    case 'f1Hallway':
			changeView("f1Intersection");
			break;
    case 'f1Lobby':
  		changeView("f1Lobby");
  		break;
    case 'gym':
    	changeView("gym");
    	break;
    case 'gymIntersection1':
  		changeView("gymIntersection");
      break;
    case 'gymIntersection2':
    	changeView("f1Intersection");
      break;
    case 'cafeteria':
      changeView("cafeteria");
      break;
    case 'gymIntersection3':
      changeView("gymIntersection");
      break;
    case 'unitAIntersection':
      changeView("unitAIntersection");
      break;
    case 'f1Intersection':
    	changeView("f1Intersection");
      break;
    case 'wStairs':
    	changeView("wStairs");
      break;
    case 'unitAIntersectionStairs':
      changeView("unitAIntersection");
      break;
    case 'unitCIntersectionStairs':
      changeView("unitCIntersection");
      break;
    case 'wStairs1':
      changeView("wStairs");
      break;
    case 'languageHallway':
      changeView("languageHallway");
      break;
    case 'unitCIntersection':
      changeView("unitCIntersection");
      break;
    case 'eStairs':
      changeView("eStairs");
      break;
    case 'languageHallway1':
      changeView("languageHallway");
      break;
    case 'lobbyStairs':
      changeView("f1Lobby");
      break;
    case 'eStairs1':
      changeView("eStairs");
      break;
    case 'kindergartenUnitA':
      changeView("kindergarten");
      break;
    case 'unitAIntersectionK':
      changeView("unitAIntersection");
      break;
    case 'scienceIntersection':
      changeView("scienceIntersection");
      break;
    case 'kindergartenScience':
      changeView("kindergarten");
      break;
    case 'art':
      changeView("art");
      break;
    case 'scienceIntersection1':
      changeView("scienceIntersection");
      break;
    case 'science':
      changeView("science");
      break;
    case 'scienceIntersection2':
      changeView("scienceIntersection");
      break;
    case 'norbert':
      changeView("norbert");
      break;
    case 'science1':
      changeView("science");
      break;
    case 'nStairsDown':
      changeView("nStairsDown");
      break;
    case 'scienceIntersection3':
      changeView("scienceIntersection");
      break;
    case 'library':
      changeView("library");
      break;
    case 'nStairsDown1':
      changeView("nStairsDown");
      break;
    case 'nStairsUp':
      changeView("nStairsUp");
      break;
    case 'scienceIntersection4':
      changeView("scienceIntersection");
      break;
    case 'cLabIntersection':
      changeView("cLabIntersection");
      break;
    case 'nStairsUp1':
      changeView("nStairsUp");
      break;
    case 'cLab':
      changeView("cLab");
      break;
    case 'cLabIntersection1':
      changeView("cLabIntersection");
      break;
    case 'unitD':
      changeView("unitD");
      break;
    case 'unitCIntersection1':
      changeView("unitCIntersection");
      break;
    case 'unitD1':
      changeView("unitD");
      break;
    case 'cLab1':
      changeView("uniform");
      break;
    case 'unitD2':
      changeView("unitD");
      break;
    case 'unitDStairs':
      changeView("unitDStairs");
      break;
    case 'unitD3':
      changeView("unitD");
      break;
    case 'unitDStairsK':
      changeView("kindergarten");
      break;
    case 'unitDStairsK1':
      changeView("unitDStairs");
      break;
    case 'lobby1':
      changeView("lobby1");
      break;
    case 'lobby2':
      changeView("f1Lobby");
      break;
    case 'outside':
      changeView("outside");
      break;
    case 'lobby3':
      changeView("lobby1");
      break;
    case 'uniform':
      changeView("uniform");
      break;
    case 'uniform1':
      changeView("uniform");
      break;
  }
  });
      });
  }
  </script>
</head>
<body style="margin:0;overflow:hidden;">
<div id='vrview'></div>
</body>
</html>
