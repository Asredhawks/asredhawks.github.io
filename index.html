<!Doctype html>
<html>
<head>
<title>St. Athanasius Tour</title>
  <!-- <script src="./vrview.min.js"></script> -->
  <script src="https://storage.googleapis.com/vrview/2.0/build/vrview.min.js"></script>
  <script>
  //yote
var sceneData;
    window.addEventListener('load', onVrViewLoad);
    function onVrViewLoad() {
	function XHR(file, callback){
    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function(){
        if(xhr.readyState === 4 && xhr.status === 200){
            callback(xhr.responseText);
            //console.log(JSON.parse(xhr.responseText));
        }
    }
    xhr.open('GET', file, true);
    xhr.send();
}
XHR('data.json', function(response) {
    sceneData = JSON.parse(response);
});
  function changeView(location) {
    vrView.setContent({
      image: sceneData[location].image,
      is_stereo: false
    });
    console.log(sceneData[location]);

    for(i in sceneData[location].hotspots){
    var name = i;
      console.log(name);
    vrView.addHotspot(name, {
    pitch: sceneData[location].hotspots[name].p, // In degrees. Up is positive.
    yaw: sceneData[location].hotspots[name].y, // In degrees. To the right is positive.
    radius: 0.75, // Radius of the circular target in meters.
    distance: 10 // Distance of target from camera in meters.
  });
      console.log(sceneData[location].hotspots[i]);
    }}

    // Selector '#vrview' finds element with id 'vrview'.
    var width = window.innerWidth;
    var height = window.innerHeight;
    var vrView = new VRView.Player('#vrview', {
      image: '//mswider.github.io/R0010043.JPG',
      is_stereo: false,
      width: width,
      height: height
    });
    vrView.on('ready',function(){
  vrView.addHotspot('lobby', {
    pitch: -15, // In degrees. Up is positive.
    yaw: 0, // In degrees. To the right is positive.
    radius: 0.75, // Radius of the circular target in meters.
    distance: 10 // Distance of target from camera in meters.
  });
  /*vrView.addHotspot('unitAIntersection', {
    pitch: -15, // In degrees. Up is positive.
    yaw: -15, // In degrees. To the right is positive.
    radius: 0.75, // Radius of the circular target in meters.
    distance: 10 // Distance of target from camera in meters.
  });
  vrView.addHotspot('gymIntersection', {
    pitch: -20, // In degrees. Up is positive.
    yaw: 95, // In degrees. To the right is positive.
    radius: 0.75, // Radius of the circular target in meters.
    distance: 10 // Distance of target from camera in meters.
  });*/
  vrView.on('click', function(event) {
  switch(event.id){
		case 'lobby':
			changeView("f1Intersection");
			break;
		case 'gymIntersection':
			changeView("gymIntersection");
			break;
    case 'f1Hallway':
			changeView("f1Intersection");
			break;
    case 'f1Lobby':
  		changeView("f1Lobby");
  		break;
    case 'gym':
    	changeView("gym");
    	break;
    case 'gymIntersection1':
  		changeView("gymIntersection");
      break;
    case 'gymIntersection2':
    	changeView("f1Intersection");
      break;
    case 'cafeteria':
      changeView("cafeteria");
      break;
    case 'gymIntersection3':
      changeView("gymIntersection");
      break;
  }
  });
      });
  }
  </script>
</head>
<body style="margin:0;overflow:hidden;">
<div id='vrview'></div>
</body>
</html>
